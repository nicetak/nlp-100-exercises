<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3: Regular Expression | A Solution of NLP 100 Exercise</title>
  <meta name="description" content="Chapter 3: Regular Expression | A Solution of NLP 100 Exercise" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3: Regular Expression | A Solution of NLP 100 Exercise" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3: Regular Expression | A Solution of NLP 100 Exercise" />
  
  
  

<meta name="author" content="Kazuharu Yanagimoto" />


<meta name="date" content="2022-03-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chapter-2-unix-commands.html"/>

<script src="libs/header-attrs-2.12/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html#preface">Preface<span></span></a></li>
<li><a href="chapter-1-warm-up.html#chapter-1-warm-up">Chapter 1: Warm-up<span></span></a>
<ul>
<li><a href="chapter-1-warm-up.html#reversed-string">00. Reversed string<span></span></a></li>
<li><a href="chapter-1-warm-up.html#schooled">01. “schooled”<span></span></a></li>
<li><a href="chapter-1-warm-up.html#shoe-cold-schooled">02. “shoe” + “cold” = “schooled”<span></span></a></li>
<li><a href="chapter-1-warm-up.html#pi">03. Pi<span></span></a></li>
<li><a href="chapter-1-warm-up.html#atomic-symbols">04. Atomic symbols<span></span></a></li>
<li><a href="chapter-1-warm-up.html#n-gram">05. n-gram<span></span></a></li>
<li><a href="chapter-1-warm-up.html#set">06. Set<span></span></a></li>
<li><a href="chapter-1-warm-up.html#template-based-sentence-generation">07. Template-based sentence generation<span></span></a></li>
<li><a href="chapter-1-warm-up.html#cipher-text">08. Cipher text<span></span></a></li>
<li><a href="chapter-1-warm-up.html#typoglycemia">09. Typoglycemia<span></span></a></li>
</ul></li>
<li><a href="chapter-2-unix-commands.html#chapter-2-unix-commands">Chapter 2: UNIX Commands<span></span></a>
<ul>
<li><a href="chapter-2-unix-commands.html#line-count">10. Line count<span></span></a></li>
<li><a href="chapter-2-unix-commands.html#replace-tabs-into-spaces">11. Replace tabs into spaces<span></span></a></li>
<li><a href="chapter-2-unix-commands.html#col1.txt-from-the-first-column-col2.txt-from-the-second-column">12. col1.txt from the first column, col2.txt from the second column<span></span></a></li>
<li><a href="chapter-2-unix-commands.html#merging-col1.txt-and-col2.txt">13. Merging col1.txt and col2.txt<span></span></a></li>
<li><a href="chapter-2-unix-commands.html#first-n-lines">14. First N lines<span></span></a></li>
<li><a href="chapter-2-unix-commands.html#last-n-lines">15. Last N lines<span></span></a></li>
<li><a href="chapter-2-unix-commands.html#split-a-file-into-n-pieces">16. Split a file into N pieces<span></span></a></li>
<li><a href="chapter-2-unix-commands.html#distinct-strings-in-the-first-column">17. Distinct strings in the first column<span></span></a></li>
<li><a href="chapter-2-unix-commands.html#sort-lines-in-descending-order-of-the-third-column">18. Sort lines in descending order of the third column<span></span></a></li>
<li><a href="chapter-2-unix-commands.html#frequency-of-a-string-in-the-first-column-in-descending-order">19. Frequency of a string in the first column in descending order<span></span></a></li>
</ul></li>
<li><a href="chapter-3-regular-expression.html#chapter-3-regular-expression">Chapter 3: Regular Expression<span></span></a>
<ul>
<li><a href="chapter-3-regular-expression.html#rea-json-documents">20. Rea JSON documents<span></span></a></li>
<li><a href="chapter-3-regular-expression.html#lines-with-category-names">21. Lines with category names<span></span></a></li>
<li><a href="chapter-3-regular-expression.html#category-names">22. Category names<span></span></a></li>
<li><a href="chapter-3-regular-expression.html#section-structure">23. Section structure<span></span></a></li>
<li><a href="chapter-3-regular-expression.html#media-references">24. Media references<span></span></a></li>
<li><a href="chapter-3-regular-expression.html#infobox">25. Infobox<span></span></a></li>
<li><a href="chapter-3-regular-expression.html#remove-emphasis-markups">26. Remove emphasis markups<span></span></a></li>
<li><a href="chapter-3-regular-expression.html#remove-internal-links">27. Remove internal links<span></span></a></li>
<li><a href="chapter-3-regular-expression.html#remove-mediawiki-markups">28. Remove MediaWiki markups<span></span></a></li>
<li><a href="chapter-3-regular-expression.html#country-flag">29. Country flag<span></span></a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Solution of NLP 100 Exercise</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapter-3-regular-expression" class="section level1 hasAnchor">
<h1>Chapter 3: Regular Expression<a href="chapter-3-regular-expression.html#chapter-3-regular-expression" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="rea-json-documents" class="section level2 hasAnchor">
<h2>20. Rea JSON documents<a href="chapter-3-regular-expression.html#rea-json-documents" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>Read the JSON documents and output the body of the article about the United Kingdom. Reuse the output in problems 21-29.</p>
</blockquote>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="chapter-3-regular-expression.html#cb73-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="fu">here</span>(<span class="st">&quot;data/enwiki-country.json&quot;</span>))</span>
<span id="cb73-2"><a href="chapter-3-regular-expression.html#cb73-2" aria-hidden="true" tabindex="-1"></a>article_UK <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;^</span><span class="sc">\\</span><span class="st">{</span><span class="sc">\&quot;</span><span class="st">title</span><span class="sc">\&quot;</span><span class="st">: </span><span class="sc">\&quot;</span><span class="st">United Kingdom</span><span class="sc">\&quot;</span><span class="st">&quot;</span>, data, <span class="at">value =</span> T)</span>
<span id="cb73-3"><a href="chapter-3-regular-expression.html#cb73-3" aria-hidden="true" tabindex="-1"></a>lines_UK <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(article_UK)<span class="sc">$</span>text <span class="sc">%&gt;%</span> <span class="fu">str_split</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">unlist</span>()</span>
<span id="cb73-4"><a href="chapter-3-regular-expression.html#cb73-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-5"><a href="chapter-3-regular-expression.html#cb73-5" aria-hidden="true" tabindex="-1"></a>lines_UK[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1] &quot;{{About-distinguish2|the country|[[Great Britain]], its largest island whose name is also loosely applied to the whole country}}&quot;
## [2] &quot;{{Redirect|UK|other uses of \&quot;UK\&quot;|UK (disambiguation)|other uses of \&quot;United Kingdom\&quot;|United Kingdom (disambiguation)}}&quot;       
## [3] &quot;{{pp-semi-indef}}&quot;                                                                                                               
## [4] &quot;{{pp-move-indef}}&quot;                                                                                                               
## [5] &quot;{{short description|Country in Western Europe}}&quot;</code></pre>
</div>
<div id="lines-with-category-names" class="section level2 hasAnchor">
<h2>21. Lines with category names<a href="chapter-3-regular-expression.html#lines-with-category-names" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>Extract lines that define the categories of the article.</p>
</blockquote>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="chapter-3-regular-expression.html#cb75-1" aria-hidden="true" tabindex="-1"></a>lines_cat <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">[</span><span class="sc">\\</span><span class="st">[Category:.*</span><span class="sc">\\</span><span class="st">]</span><span class="sc">\\</span><span class="st">]&quot;</span>, lines_UK, <span class="at">value =</span> T)</span>
<span id="cb75-2"><a href="chapter-3-regular-expression.html#cb75-2" aria-hidden="true" tabindex="-1"></a>lines_cat <span class="sc">%&gt;%</span></span>
<span id="cb75-3"><a href="chapter-3-regular-expression.html#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] &quot;[[Category:United Kingdom| ]]&quot;                          
## [2] &quot;[[Category:British Islands]]&quot;                           
## [3] &quot;[[Category:Countries in Europe]]&quot;                       
## [4] &quot;[[Category:English-speaking countries and territories]]&quot;
## [5] &quot;[[Category:G7 nations]]&quot;                                
## [6] &quot;[[Category:Group of Eight nations]]&quot;</code></pre>
</div>
<div id="category-names" class="section level2 hasAnchor">
<h2>22. Category names<a href="chapter-3-regular-expression.html#category-names" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>Extract the category names of the article.</p>
</blockquote>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="chapter-3-regular-expression.html#cb77-1" aria-hidden="true" tabindex="-1"></a>lines_cat <span class="sc">%&gt;%</span></span>
<span id="cb77-2"><a href="chapter-3-regular-expression.html#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(<span class="cf">function</span>(x) <span class="fu">str_replace_all</span>(x, <span class="st">&quot;^</span><span class="sc">\\</span><span class="st">[</span><span class="sc">\\</span><span class="st">[Category:|</span><span class="sc">\\</span><span class="st">| |</span><span class="sc">\\</span><span class="st">]</span><span class="sc">\\</span><span class="st">]$&quot;</span>, <span class="st">&quot;&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb77-3"><a href="chapter-3-regular-expression.html#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb77-4"><a href="chapter-3-regular-expression.html#cb77-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] &quot;United Kingdom&quot;                            
## [2] &quot;British Islands&quot;                           
## [3] &quot;Countries in Europe&quot;                       
## [4] &quot;English-speaking countries and territories&quot;
## [5] &quot;G7 nations&quot;                                
## [6] &quot;Group of Eight nations&quot;</code></pre>
</div>
<div id="section-structure" class="section level2 hasAnchor">
<h2>23. Section structure<a href="chapter-3-regular-expression.html#section-structure" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>Extract section names in the article with their levels. For example, the level of the section is 1 for the MediaWiki markup “== Section name ==”.</p>
</blockquote>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="chapter-3-regular-expression.html#cb79-1" aria-hidden="true" tabindex="-1"></a>sections <span class="ot">&lt;-</span> lines_UK <span class="sc">%&gt;%</span></span>
<span id="cb79-2"><a href="chapter-3-regular-expression.html#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract_all</span>(<span class="st">&quot;==.*==&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb79-3"><a href="chapter-3-regular-expression.html#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>()</span>
<span id="cb79-4"><a href="chapter-3-regular-expression.html#cb79-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-5"><a href="chapter-3-regular-expression.html#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>){</span>
<span id="cb79-6"><a href="chapter-3-regular-expression.html#cb79-6" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> sections[i]</span>
<span id="cb79-7"><a href="chapter-3-regular-expression.html#cb79-7" aria-hidden="true" tabindex="-1"></a>  level <span class="ot">&lt;-</span> <span class="fu">str_count</span>(s, <span class="st">&quot;=&quot;</span>) <span class="sc">/</span> <span class="dv">2</span> <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb79-8"><a href="chapter-3-regular-expression.html#cb79-8" aria-hidden="true" tabindex="-1"></a>  section <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(s, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">s*={2,4}</span><span class="sc">\\</span><span class="st">s*&quot;</span>, <span class="st">&quot;&quot;</span>)</span>
<span id="cb79-9"><a href="chapter-3-regular-expression.html#cb79-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(level, <span class="st">&quot; &quot;</span>, section))</span>
<span id="cb79-10"><a href="chapter-3-regular-expression.html#cb79-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;1 Etymology and terminology&quot;
## [1] &quot;1 History&quot;
## [1] &quot;2 Background&quot;
## [1] &quot;2 Treaty of Union&quot;
## [1] &quot;2 From the union with Ireland to the end of the First World War&quot;
## [1] &quot;2 Between the World Wars&quot;</code></pre>
</div>
<div id="media-references" class="section level2 hasAnchor">
<h2>24. Media references<a href="chapter-3-regular-expression.html#media-references" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>Extract references to media files linked from the article.</p>
</blockquote>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="chapter-3-regular-expression.html#cb81-1" aria-hidden="true" tabindex="-1"></a>lines_UK <span class="sc">%&gt;%</span></span>
<span id="cb81-2"><a href="chapter-3-regular-expression.html#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract_all</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">[</span><span class="sc">\\</span><span class="st">[File:.*?(</span><span class="sc">\\</span><span class="st">||</span><span class="sc">\\</span><span class="st">]</span><span class="sc">\\</span><span class="st">])&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb81-3"><a href="chapter-3-regular-expression.html#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb81-4"><a href="chapter-3-regular-expression.html#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="st">&quot;^</span><span class="sc">\\</span><span class="st">[</span><span class="sc">\\</span><span class="st">[File:|</span><span class="sc">\\</span><span class="st">|$|</span><span class="sc">\\</span><span class="st">]</span><span class="sc">\\</span><span class="st">]$&quot;</span>, <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb81-5"><a href="chapter-3-regular-expression.html#cb81-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Royal Coat of Arms of the United Kingdom.svg&quot;                                                       
## [2] &quot;Royal Coat of Arms of the United Kingdom (Scotland).svg&quot;                                            
## [3] &quot;United States Navy Band - God Save the Queen.ogg&quot;                                                   
## [4] &quot;Europe-UK (orthographic projection).svg&quot;                                                            
## [5] &quot;Europe-UK.svg&quot;                                                                                      
## [6] &quot;United Kingdom (+overseas territories and crown dependencies) in the World (+Antarctica claims).svg&quot;</code></pre>
</div>
<div id="infobox" class="section level2 hasAnchor">
<h2>25. Infobox<a href="chapter-3-regular-expression.html#infobox" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>Extract field names and their values in the Infobox “country”, and store them in a dictionary object.</p>
</blockquote>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="chapter-3-regular-expression.html#cb83-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> article_UK <span class="sc">%&gt;%</span></span>
<span id="cb83-2"><a href="chapter-3-regular-expression.html#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract_all</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">{</span><span class="sc">\\</span><span class="st">{Infobox country.*?(</span><span class="sc">\\</span><span class="st">{</span><span class="sc">\\</span><span class="st">{.*?</span><span class="sc">\\</span><span class="st">}</span><span class="sc">\\</span><span class="st">}.*?)*?</span><span class="sc">\\</span><span class="st">}</span><span class="sc">\\</span><span class="st">}&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb83-3"><a href="chapter-3-regular-expression.html#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb83-4"><a href="chapter-3-regular-expression.html#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="st">&quot;^</span><span class="sc">\\</span><span class="st">{</span><span class="sc">\\</span><span class="st">{Infobox country</span><span class="sc">\\\\</span><span class="st">n</span><span class="sc">\\</span><span class="st">| |</span><span class="sc">\\</span><span class="st">}</span><span class="sc">\\</span><span class="st">}&quot;</span>, <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb83-5"><a href="chapter-3-regular-expression.html#cb83-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb83-6"><a href="chapter-3-regular-expression.html#cb83-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">&quot;</span><span class="sc">\\\\</span><span class="st">n</span><span class="sc">\\</span><span class="st">| &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb83-7"><a href="chapter-3-regular-expression.html#cb83-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb83-8"><a href="chapter-3-regular-expression.html#cb83-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="st">&quot; += &quot;</span>, <span class="st">&quot;===&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb83-9"><a href="chapter-3-regular-expression.html#cb83-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>()</span>
<span id="cb83-10"><a href="chapter-3-regular-expression.html#cb83-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-11"><a href="chapter-3-regular-expression.html#cb83-11" aria-hidden="true" tabindex="-1"></a>infobox <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">key =</span> <span class="fu">character</span>(), <span class="at">value =</span> <span class="fu">character</span>())</span>
<span id="cb83-12"><a href="chapter-3-regular-expression.html#cb83-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-13"><a href="chapter-3-regular-expression.html#cb83-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(s <span class="cf">in</span> tmp){</span>
<span id="cb83-14"><a href="chapter-3-regular-expression.html#cb83-14" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_split</span>(s, <span class="st">&quot;===&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">unlist</span>()</span>
<span id="cb83-15"><a href="chapter-3-regular-expression.html#cb83-15" aria-hidden="true" tabindex="-1"></a>  infobox <span class="ot">&lt;-</span> infobox <span class="sc">%&gt;%</span> <span class="fu">bind_rows</span>(<span class="fu">tibble</span>(<span class="at">key =</span> x[<span class="dv">1</span>], <span class="at">value =</span> x[<span class="dv">2</span>]))</span>
<span id="cb83-16"><a href="chapter-3-regular-expression.html#cb83-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb83-17"><a href="chapter-3-regular-expression.html#cb83-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-18"><a href="chapter-3-regular-expression.html#cb83-18" aria-hidden="true" tabindex="-1"></a>infobox</span></code></pre></div>
<pre><code>## # A tibble: 8 × 2
##   key                    value                                                  
##   &lt;chr&gt;                  &lt;chr&gt;                                                  
## 1 common_name            &quot;United Kingdom&quot;                                       
## 2 linking_name           &quot;the United Kingdom&lt;!--Note: \\\&quot;the\\\&quot; required here…
## 3 conventional_long_name &quot;United Kingdom of Great Britain and Northern Ireland&quot; 
## 4 image_flag             &quot;Flag of the United Kingdom.svg&quot;                       
## 5 alt_flag               &quot;A flag featuring both cross and saltire in red, white…
## 6 other_symbol           &quot;[[File:Royal Coat of Arms of the United Kingdom.svg|x…
## 7 other_symbol_type      &quot;[[Royal coat of arms of the United Kingdom|Royal coat…
## 8 national_anthem        &quot;\\\&quot;[[God Save the Queen]]\\\&quot;{{#tag:ref |There is no…</code></pre>
</div>
<div id="remove-emphasis-markups" class="section level2 hasAnchor">
<h2>26. Remove emphasis markups<a href="chapter-3-regular-expression.html#remove-emphasis-markups" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>In addition to the process of the problem 25, remove emphasis MediaWiki markups from the values.</p>
</blockquote>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="chapter-3-regular-expression.html#cb85-1" aria-hidden="true" tabindex="-1"></a>infobox <span class="ot">&lt;-</span> infobox <span class="sc">%&gt;%</span></span>
<span id="cb85-2"><a href="chapter-3-regular-expression.html#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">str_replace_all</span>(value, <span class="st">&quot;&#39;&#39;|&#39;&#39;&#39;&quot;</span>, <span class="st">&quot;&quot;</span>))</span>
<span id="cb85-3"><a href="chapter-3-regular-expression.html#cb85-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-4"><a href="chapter-3-regular-expression.html#cb85-4" aria-hidden="true" tabindex="-1"></a>infobox</span></code></pre></div>
<pre><code>## # A tibble: 8 × 2
##   key                    value                                                  
##   &lt;chr&gt;                  &lt;chr&gt;                                                  
## 1 common_name            &quot;United Kingdom&quot;                                       
## 2 linking_name           &quot;the United Kingdom&lt;!--Note: \\\&quot;the\\\&quot; required here…
## 3 conventional_long_name &quot;United Kingdom of Great Britain and Northern Ireland&quot; 
## 4 image_flag             &quot;Flag of the United Kingdom.svg&quot;                       
## 5 alt_flag               &quot;A flag featuring both cross and saltire in red, white…
## 6 other_symbol           &quot;[[File:Royal Coat of Arms of the United Kingdom.svg|x…
## 7 other_symbol_type      &quot;[[Royal coat of arms of the United Kingdom|Royal coat…
## 8 national_anthem        &quot;\\\&quot;[[God Save the Queen]]\\\&quot;{{#tag:ref |There is no…</code></pre>
</div>
<div id="remove-internal-links" class="section level2 hasAnchor">
<h2>27. Remove internal links<a href="chapter-3-regular-expression.html#remove-internal-links" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>In addition to the process of the problem 26, remove internal links from the values.</p>
</blockquote>
</div>
<div id="remove-mediawiki-markups" class="section level2 hasAnchor">
<h2>28. Remove MediaWiki markups<a href="chapter-3-regular-expression.html#remove-mediawiki-markups" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>In addition to the process of the problem 27, remove MediaWiki markups from the values as much as you can, and obtain the basic information of the country in plain text format.</p>
</blockquote>
</div>
<div id="country-flag" class="section level2 hasAnchor">
<h2>29. Country flag<a href="chapter-3-regular-expression.html#country-flag" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>Obtain the URL of the country flag by using the analysis result of Infobox.</p>
</blockquote>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="chapter-3-regular-expression.html#cb87-1" aria-hidden="true" tabindex="-1"></a>file <span class="ot">&lt;-</span> infobox<span class="sc">$</span>value[infobox<span class="sc">$</span>key <span class="sc">==</span> <span class="st">&quot;image_flag&quot;</span>]</span>
<span id="cb87-2"><a href="chapter-3-regular-expression.html#cb87-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://en.wikipedia.org/w/api.php&quot;</span></span>
<span id="cb87-3"><a href="chapter-3-regular-expression.html#cb87-3" aria-hidden="true" tabindex="-1"></a>query <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb87-4"><a href="chapter-3-regular-expression.html#cb87-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">action =</span> <span class="st">&quot;query&quot;</span>,</span>
<span id="cb87-5"><a href="chapter-3-regular-expression.html#cb87-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">format =</span> <span class="st">&quot;json&quot;</span>,</span>
<span id="cb87-6"><a href="chapter-3-regular-expression.html#cb87-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">prop =</span> <span class="st">&quot;imageinfo&quot;</span>,</span>
<span id="cb87-7"><a href="chapter-3-regular-expression.html#cb87-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">titles =</span> <span class="fu">paste0</span>(<span class="st">&quot;File:&quot;</span>, file),</span>
<span id="cb87-8"><a href="chapter-3-regular-expression.html#cb87-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">iiprop =</span> <span class="st">&quot;url&quot;</span></span>
<span id="cb87-9"><a href="chapter-3-regular-expression.html#cb87-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb87-10"><a href="chapter-3-regular-expression.html#cb87-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-11"><a href="chapter-3-regular-expression.html#cb87-11" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">GET</span>(<span class="at">url=</span>url, <span class="at">query=</span>query)</span>
<span id="cb87-12"><a href="chapter-3-regular-expression.html#cb87-12" aria-hidden="true" tabindex="-1"></a>image_info <span class="ot">&lt;-</span> res <span class="sc">%&gt;%</span></span>
<span id="cb87-13"><a href="chapter-3-regular-expression.html#cb87-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">content</span>(<span class="st">&quot;text&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb87-14"><a href="chapter-3-regular-expression.html#cb87-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fromJSON</span>()</span>
<span id="cb87-15"><a href="chapter-3-regular-expression.html#cb87-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-16"><a href="chapter-3-regular-expression.html#cb87-16" aria-hidden="true" tabindex="-1"></a>url_image <span class="ot">&lt;-</span> image_info<span class="sc">$</span>query<span class="sc">$</span>pages[[<span class="dv">1</span>]]<span class="sc">$</span>imageinfo<span class="sc">$</span>url</span></code></pre></div>
<div class="figure">
<img src="https://upload.wikimedia.org/wikipedia/en/a/ae/Flag_of_the_United_Kingdom.svg" alt="" />
<p class="caption">Obtained image</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapter-2-unix-commands.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
